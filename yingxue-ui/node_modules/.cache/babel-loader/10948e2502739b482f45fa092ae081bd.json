{"remainingRequest":"E:\\javafile\\yingxue-admin\\yingxue-ui\\node_modules\\babel-loader\\lib\\index.js!E:\\javafile\\yingxue-admin\\yingxue-ui\\src\\router\\index.js","dependencies":[{"path":"E:\\javafile\\yingxue-admin\\yingxue-ui\\src\\router\\index.js","mtime":1652150310000},{"path":"E:\\javafile\\yingxue-admin\\yingxue-ui\\babel.config.js","mtime":1652150310000},{"path":"E:\\javafile\\yingxue-admin\\yingxue-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659166634376},{"path":"E:\\javafile\\yingxue-admin\\yingxue-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1659166658972}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkU6XFxqYXZhZmlsZVxceWluZ3h1ZS1hZG1pblxceWluZ3h1ZS11aVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKLy8xXOW8leWFpei3r+eUsQppbXBvcnQgVnVlIGZyb20gInZ1ZSI7CmltcG9ydCBWdWVSb3V0ZXIgZnJvbSAidnVlLXJvdXRlciI7CmltcG9ydCByb3V0ZXMgZnJvbSAiLi9yb3V0ZXMiOyAvL+W8leWFpXN0b3JlCgppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSI7IC8vMuOAgeS9v+eUqOaPkuS7tgoKVnVlLnVzZShWdWVSb3V0ZXIpOyAvL+WFiOaKilZ1ZVJvdXRlcuWOn+Wei+WvueixoeeahHB1c2jvvIzlhYjkv53lrZjkuIsKCnZhciBvcmlnaW5QdXNoID0gVnVlUm91dGVyLnByb3RvdHlwZS5wdXNoOwp2YXIgb3JpZ2luUmVwbGFjZSA9IFZ1ZVJvdXRlci5wcm90b3R5cGUucmVwbGFjZTsgLy/ph43lhplwdXNofHJlcGxhY2UKLy/nrKzkuIDkuKrlj4LmlbDvvJrljp/mnaXnmoRwdXNo5pa55rOV77yM5L2g5b6A5ZOq6YeM6Lez77yI5Lyg6YCS5Y+C5pWw77yJCi8v56ys5LqM5Liq5Y+C5pWw77ya5oiQ5Yqf5Zue6LCDCi8v56ys5LiJ5Liq5Y+C5pWw77ya5aSx6LSl5Zue6LCDCgpWdWVSb3V0ZXIucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAobG9jYXRpb24sIHJlc29sdmUsIHJlamVjdCkgewogIGlmIChyZXNvbHZlIHwgcmVqZWN0KSB7CiAgICAvL2NhbGx8YXBwbHk66YO95Y+v5Lul6LCD55So5Ye95pWw5LiA5qyh77yM5pS55Y+Y5pS55Y+Y5LiK5LiL5paH5LiA5qyhCiAgICAvL+S4jeWQjOeCue+8mmNhbGzlkoxhcHBseeS8oOmAkuWPguaVsOS4jeWQjO+8jGNhbGznlKjpgJflj7fpmpTlvIDvvIxhcHBseeS8oOmAkuaVsOe7hAogICAgb3JpZ2luUHVzaC5jYWxsKHRoaXMsIGxvY2F0aW9uLCByZXNvbHZlLCByZWplY3QpOwogIH0gZWxzZSB7CiAgICBvcmlnaW5QdXNoLmNhbGwodGhpcywgbG9jYXRpb24sIGZ1bmN0aW9uICgpIHt9LCBmdW5jdGlvbiAoKSB7fSk7CiAgfQp9OwoKVnVlUm91dGVyLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gKGxvY2F0aW9uLCByZXNvbHZlLCByZWplY3QpIHsKICBpZiAocmVzb2x2ZSB8IHJlamVjdCkgewogICAgb3JpZ2luUmVwbGFjZS5jYWxsKHRoaXMsIGxvY2F0aW9uLCByZXNvbHZlLCByZWplY3QpOwogIH0gZWxzZSB7CiAgICBvcmlnaW5SZXBsYWNlLmNhbGwodGhpcywgbG9jYXRpb24sIGZ1bmN0aW9uICgpIHt9LCBmdW5jdGlvbiAoKSB7fSk7CiAgfQp9OyAvL+W8leWFpei3r+eUsee7hOS7tgoKCnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICAvL+mFjee9rui3r+eUsQogIHJvdXRlczogcm91dGVzLAogIC8v5rua5Yqo6KGM5Li6CiAgc2Nyb2xsQmVoYXZpb3I6IGZ1bmN0aW9uIHNjcm9sbEJlaGF2aW9yKHRvLCBmcm9tLCBzYXZlZFBvc2l0aW9uKSB7CiAgICAvLyDlp4vnu4jmu5rliqjliLDpobbpg6gKICAgIHJldHVybiB7CiAgICAgIHk6IDAKICAgIH07CiAgfQp9KTsgLy/lhajlsYDliY3nva7lrojljastLeWcqOi3r+eUsei3s+i9rOS5i+WJjeWIpOaWrQoKcm91dGVyLmJlZm9yZUVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciB0b2tlbiwgbmFtZSwgdG9QYXRoOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvL3Rv77ya6KaB6Lez6L2s6Lev55Sx55qE5L+h5oGvCiAgICAgICAgICAgIC8vZnJvbTrku47lk6rkuKrot6/nlLHot7PmnaXnmoTkv6Hmga8KICAgICAgICAgICAgLy9uZXh0OuaUvuihjOWHveaVsCAgbmV4dCgp5pS+6KGMICAgbmV4dChwYXRoKeaUvuihjOWIsOaMh+Wumui3r+eUsSAgICBuZXh0KGZhbHNlKQogICAgICAgICAgICAvL+a1i+ivleWFiOmDveaUvuihjAogICAgICAgICAgICAvLyBuZXh0KCk7CiAgICAgICAgICAgIC8v55So5oi355m76ZmG5LqG77yM5omN5Lya5pyJdG9rZW4s5pyq55m75b2V5LiA5a6a5LiN5Lya5pyJdG9rZW4KICAgICAgICAgICAgdG9rZW4gPSBzdG9yZS5zdGF0ZS51c2VyLnRva2VuOyAvL+eUqOaIt+S/oeaBrwoKICAgICAgICAgICAgbmFtZSA9IHN0b3JlLnN0YXRlLnVzZXIudXNlckluZm8ubmFtZTsgLy8gY29uc29sZS5sb2codG9rZW4sdG8ucGF0aCx0by5wYXRoPT0nL2xvZ2luJykKICAgICAgICAgICAgLy/lt7Lnu4/nmbvlvZUsCgogICAgICAgICAgICBpZiAoIXRva2VuKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoISh0by5wYXRoID09PSAnL2xvZ2luJykpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmV4dCgnLycpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgaWYgKCFuYW1lKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDExOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnZ2V0VXNlckluZm8nKTsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE3OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDExKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIxOwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VzZXJMb2dvdXQnKTsKCiAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICBuZXh0KCcvbG9naW4nKTsKCiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjY7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgIC8v5pyq55m75b2V5rKh5pyJ5aSE55CG5a6M5q+VCiAgICAgICAgICAgIC8v5rKh55m75b2V77yM5LiN6IO95Y675Lqk5piT55u45YWz44CQdHJhZGXjgJHjgIHkuI3og73ljrvmlK/ku5jnm7jlhbPjgJBQYXl8UGF5U3VjY2Vzc+OAke+8jOS4jeiDveWOu+S4quS6uuS4reW/g+OAkGNlbnRlcuOAkQogICAgICAgICAgICAvL+S4uueZu+W9leWOu+S4iumdoui/meS6m+mhtemdou+8jOW6lOivpeimgeWOuy0tLS0+55m75b2VCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCcxMTExMTExJykKICAgICAgICAgICAgdG9QYXRoID0gdG8ucGF0aDsKCiAgICAgICAgICAgIGlmICh0b1BhdGguaW5kZXhPZignL3RyYWRlJykgIT09IC0xIHx8IHRvUGF0aC5pbmRleE9mKCcvcGF5JykgIT09IC0xIHx8IHRvUGF0aC5pbmRleE9mKCcvY2VudGVyJykgIT09IC0xKSB7CiAgICAgICAgICAgICAgLy/lnLrmma/vvJrljp/mnaXmg7PljrvjgJDmiJHnmoTorqLljZU6L3RyYWRl44CR77yM5L2G5piv5rKh5pyJ55m75b2V77yM5Y675LiN5b6X5LqG77yM55m75b2V55qE5ZCO77yM5bqU6K+l6KaB5Y6744CQ5oiR55qE6K6i5Y2VOi90cmFkZeOAkSzogIzkuI3mmK/ljrvpppbpobUKICAgICAgICAgICAgICAvL+Wll+i3r++8muaKiuacquWOu+eahOS/oeaBr+aUvuWcqHF1ZXJ55Y+C5pWwCiAgICAgICAgICAgICAgbmV4dCgnL2xvZ2luP3JlZGlyZWN0PScgKyB0b1BhdGgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG5leHQoKTsgLy/kuI3mmK/ljrvkuIrpnaLov5nkupvpobXpnaLvvIzlj6/ku6XljrstLS0tLT7pppbpobUKICAgICAgICAgICAgfQoKICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxMSwgMTddXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOyAvL+WvvOWHuuS9v+eUqAoKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["E:/javafile/yingxue-admin/yingxue-ui/src/router/index.js"],"names":["Vue","VueRouter","routes","store","use","originPush","prototype","push","originReplace","replace","location","resolve","reject","call","router","scrollBehavior","to","from","savedPosition","y","beforeEach","next","token","state","user","name","userInfo","path","dispatch","toPath","indexOf"],"mappings":"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","sourcesContent":["//1\\引入路由\nimport Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport routes from \"./routes\"\n//引入store\nimport store from \"@/store\"\n//2、使用插件\n Vue.use(VueRouter);\n\n\n//先把VueRouter原型对象的push，先保存下\nlet originPush=VueRouter.prototype.push;\nlet originReplace=VueRouter.prototype.replace;\n//重写push|replace\n//第一个参数：原来的push方法，你往哪里跳（传递参数）\n//第二个参数：成功回调\n//第三个参数：失败回调\nVueRouter.prototype.push=function(location,resolve,reject){\n  if(resolve|reject){\n      //call|apply:都可以调用函数一次，改变改变上下文一次\n      //不同点：call和apply传递参数不同，call用逗号隔开，apply传递数组\n    originPush.call(this,location,resolve,reject)\n  }else{\n    originPush.call(this,location,()=>{},()=>{})\n  }\n}\n\nVueRouter.prototype.replace=function(location,resolve,reject){\n    if(resolve|reject){\n        originReplace.call(this,location,resolve,reject)\n    }else{\n        originReplace.call(this,location,()=>{},()=>{})\n    }\n  }\n\n //引入路由组件\n const router= new VueRouter({\n     //配置路由\n     routes,\n     //滚动行为\n     scrollBehavior(to, from, savedPosition) {\n      // 始终滚动到顶部\n      return { y: 0 }\n    }\n })\n //全局前置守卫--在路由跳转之前判断\n router.beforeEach(async (to,from,next)=>{\n  //to：要跳转路由的信息\n  //from:从哪个路由跳来的信息\n  //next:放行函数  next()放行   next(path)放行到指定路由    next(false)\n  //测试先都放行\n  // next();\n  //用户登陆了，才会有token,未登录一定不会有token\n  let token = store.state.user.token;\n  //用户信息\n  let name=store.state.user.userInfo.name;\n\n  // console.log(token,to.path,to.path=='/login')\n  //已经登录,\n  if(token){\n     //已登录不可以去login.停留在首页\n      if(to.path==='/login'){\n        next('/');\n      }else{\n        //登录，但是不是去login,【home|detail|search】..\n        //如果用户名有\n        if(name){\n          next()\n        }else{\n          //没有用户信息，要派发action。获取用户信息再首页展示\n          try{\n            //获取用户信息成功\n            await store.dispatch('getUserInfo');\n            next()\n          }catch(error){\n            //有tokrn,但是没用户信息,又请求没拿到用户信息----->token过期\n            //清除token\n            await store.dispatch('userLogout');\n            next('/login');\n          }\n\n        }\n      }\n  }else{//未登录没有处理完毕\n    //没登录，不能去交易相关【trade】、不能去支付相关【Pay|PaySuccess】，不能去个人中心【center】\n    //为登录去上面这些页面，应该要去---->登录\n    // console.log('1111111')\n    let toPath=to.path;\n    if(toPath.indexOf('/trade')!==-1||toPath.indexOf('/pay')!==-1||toPath.indexOf('/center')!==-1){\n      //场景：原来想去【我的订单:/trade】，但是没有登录，去不得了，登录的后，应该要去【我的订单:/trade】,而不是去首页\n      //套路：把未去的信息放在query参数\n      next('/login?redirect='+toPath);\n    }else{\n      next();\n      //不是去上面这些页面，可以去----->首页\n    }\n\n  }\n })\n //导出使用\n export default router\n"]}]}